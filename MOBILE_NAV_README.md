# 思源笔记移动端底部导航栏功能

## 功能概述

本功能为思源笔记的移动端页面添加了一个底部导航栏，支持前进、后退和随机跳转功能，提升移动端使用体验。

## 功能特性

### 1. 底部导航栏
- 在移动端页面底部显示固定导航栏
- 支持自定义高度、背景颜色和按钮颜色
- 自动检测移动端环境，仅在移动端显示

### 2. 导航功能
- **后退按钮**：支持浏览器历史记录后退
- **前进按钮**：支持浏览器历史记录前进  
- **随机按钮**：随机跳转到思源笔记中的任意文档

### 3. 配置选项
- 启用/禁用底部导航栏
- 显示/隐藏各个导航按钮
- 自定义导航栏高度
- 自定义背景颜色和按钮颜色
- 自定义激活按钮颜色

## 使用方法

### 1. 启用功能
1. 打开思源笔记插件设置
2. 在"开关"选项卡中找到"移动端助手"
3. 勾选启用该功能

### 2. 配置选项
在"移动端助手"选项卡中可以配置：
- **启用底部导航栏**：控制是否显示导航栏
- **显示后退按钮**：控制是否显示后退按钮
- **显示前进按钮**：控制是否显示前进按钮
- **显示随机按钮**：控制是否显示随机跳转按钮
- **导航栏高度**：设置导航栏的高度（默认60px）
- **背景颜色**：设置导航栏背景颜色（默认白色）
- **按钮颜色**：设置按钮文字颜色（默认深灰色）
- **激活按钮颜色**：设置按钮激活时的颜色（默认蓝色）

### 3. 移动端检测
功能会自动检测当前环境是否为移动端：
- 检测用户代理字符串
- 检测屏幕宽度（≤768px）
- 支持响应式切换（窗口大小变化时重新检测）

## 技术实现

### 1. 移动端检测
```javascript
detectMobile() {
  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
         window.innerWidth <= 768 ||
         document.documentElement.clientWidth <= 768;
}
```

### 2. 随机跳转实现
使用思源笔记的SQL API查询随机文档：
```javascript
const response = await fetch('/api/query/sql', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    stmt: "SELECT id FROM blocks WHERE type = 'd' ORDER BY RANDOM() LIMIT 1"
  })
});
```

### 3. 样式设计
- 使用固定定位（position: fixed）确保导航栏始终在底部
- 添加阴影效果提升视觉层次
- 支持触摸友好的按钮设计
- 自动调整页面底部边距避免内容被遮挡

## 注意事项

1. 该功能仅在移动端环境下生效
2. 随机跳转功能需要思源笔记的SQL API支持
3. 配置更改后需要重新加载页面才能生效
4. 导航栏会占用一定的屏幕空间，建议根据设备屏幕大小调整高度

## 更新日志

### v0.9.3
- 新增移动端底部导航栏功能
- 支持前进、后退、随机跳转
- 提供丰富的配置选项
- 自动移动端检测和响应式设计
