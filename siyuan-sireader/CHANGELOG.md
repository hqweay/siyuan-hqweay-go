# 思阅 SiReader - 使用说明书

> **让思源笔记变身专业电子书阅读器**  
> 支持智能标注、多主题切换、词典查询，打造沉浸式阅读体验  
> 当前支持：EPUB格式 | 未来计划：PDF、MOBI等更多格式
>
> 感谢原作者提供的思源模板，让插件开发更加便捷高效 🙏

---

## 📖 快速开始

### 🚀 安装插件
1. 在思源笔记中打开 `设置` → `集市` → `插件`
2. 搜索 "思阅" 或 "SiReader" 并安装
3. 启用插件后，工具栏会出现 📖 阅读器图标

### 📝 打开EPUB书籍
拖拽EPUB文件到思源文档中，会自动创建链接，点击链接即可打开

---

## 🎨 主要功能

### 📚 阅读体验

#### 🎨 多主题切换
提供8款精美主题 + 自定义主题，适应不同阅读场景：

**8款预设主题：**
| 主题 | 适用场景 | 特色 |
|------|----------|------|
| **默认** | 日常阅读 | 经典白底黑字，清晰易读 |
| **杏仁黄** | 长时间阅读 | 护眼配色，减少视疲劳 |
| **秋叶褐** | 温馨阅读 | 温暖色调，舒适体验 |
| **青草绿** | 自然阅读 | 清新绿色，护眼养神 |
| **海天蓝** | 平静阅读 | 宁静蓝色，平和心境 |
| **夜间** | 夜晚阅读 | 深色背景，保护视力 |
| **暗黑** | 专注阅读 | 纯黑模式，沉浸体验 |
| **赤金** | 高端阅读 | 奢华配色，尊享体验 |

**自定义主题：**
- **字体颜色**：自定义文字显示颜色（支持HEX色值）
- **背景颜色**：自定义页面背景色（支持HEX色值）
- **背景图片**：上传自定义背景图片（支持URL或本地路径）
- **实时预览**：修改后立即看到效果，支持导入导出配置

#### 📱 阅读模式
- **分页模式**：传统翻页体验，适合小说阅读
- **滚动模式**：连续滚动，适合学术文档
- **单页显示**：专注当前页面
- **双页显示**：模拟纸质书阅读

#### ⌨️ 便捷操作
- **键盘导航**：← → 方向键翻页
- **工具栏控制**：上一页、下一页、目录按钮
- **快捷键支持**：ESC 关闭菜单

### 📝 智能标注

#### 🎨 7色标注系统
使用7种颜色标记不同类型的内容：

| 颜色 | 快捷键 | 建议用途 |
|------|--------|----------|
| 🔴 **红色** | R | 重要内容、关键概念 |
| 🟠 **橙色** | O | 需要注意的问题 |
| 🟡 **黄色** | Y | 一般重点、提醒事项 |
| 🟢 **绿色** | G | 正面信息、好的观点 |
| 🩷 **粉色** | P | 个人感悟、思考 |
| 🔵 **蓝色** | B | 补充信息、扩展内容 |
| 🟣 **紫色** | V | 疑问点、需要查证 |

#### 📖 章节自动标记
- 标注时自动添加所在章节信息
- 标注格式：`- R [标注文本（第三章）](链接#位置)`
- 在标注面板中章节信息独立显示

#### 📝 标注文档管理
**两种管理模式**：
1. **笔记本模式**：为每本书在指定笔记本下创建独立文档
2. **文档模式**：在指定文档下为每本书创建子文档

### 📚 目录导航

#### 📂 三种浏览模式

**1. 目录模式**
- **章节导航**：显示完整的书籍目录结构
- **层级展示**：支持多级目录，自动缩进显示
- **进度显示**：每章节显示阅读进度百分比
- **书签操作**：悬停章节显示📖书签按钮，点击添加/删除书签
- **当前位置**：高亮显示当前阅读的章节

**2. 书签模式**
- **书签列表**：显示所有已保存的书签
- **快速跳转**：点击书签直接跳转到对应位置
- **书签管理**：悬停显示🗑️删除按钮，一键删除书签
- **空状态提示**：无书签时显示"暂无书签"提示
- **章节标题**：显示书签所在的章节名称

**3. 标注模式**
- **标注列表**：显示所有颜色标注内容
- **颜色分类**：左侧颜色边框标识不同标注类型
- **内容展示**：标注文本 + 章节信息分离显示
- **快速定位**：点击标注直接跳转到原文位置
- **删除功能**：悬停显示🗑️删除按钮，管理标注内容

#### 🔖 书签功能详解

**添加书签方法**：
1. **目录中添加**：在目录模式下悬停章节，点击📖按钮
2. **阅读时添加**：在阅读界面工具栏点击书签按钮
3. **自动保存**：书签会立即保存到思源笔记数据库

**书签样式特性**：
- **视觉标识**：已添加书签的章节显示红色📖图标
- **悬停效果**：未添加书签时悬停显示透明图标
- **状态切换**：点击切换添加/删除状态，即时响应

**书签页面展示**：
- **清晰布局**：书签标题 + 章节位置信息
- **快速访问**：点击任意书签立即跳转
- **批量管理**：支持逐个删除管理

#### 🎨 标注页面展示

**标注内容布局**：
- **主要文本**：标注的原文内容，保持原始格式
- **章节信息**：小字灰色显示，格式如"第三章"
- **颜色标识**：左侧3px彩色边框，区分标注类型

**标注交互功能**：
- **点击跳转**：点击标注内容直接定位到原文
- **悬停删除**：悬停显示删除按钮，确认后删除
- **颜色识别**：7种颜色边框对应不同标注类型

#### 🔍 智能搜索
- **实时搜索**：输入关键词立即过滤章节
- **模糊匹配**：支持中英文模糊搜索
- **搜索范围**：仅在目录模式下生效
- **结果高亮**：匹配的章节保持显示

#### 📊 进度显示
- **章节进度**：每章显示阅读百分比
- **进度条**：底部彩色进度条可视化
- **自动更新**：阅读时实时更新进度
- **持久保存**：进度自动保存到数据库

### 📚 词典查询

#### 🌐 多词典支持
支持7个专业词典源，自动选择最合适的词典：

| 词典 | 语言 | 特色功能 |
|------|------|----------|
| **剑桥词典** | 英语 | 专业释义，美英音标，例句丰富，自动发音 |
| **有道词典** | 英语 | 快速联想搜索，智能推荐 |
| **海词词典** | 英语 | 详细解析，发音音频，词性标注 |
| **汉字词典** | 中文 | 部首笔画，拼音注音，字形解析 |
| **词语词典** | 中文 | 词汇释义，近反义词，成语典故 |
| **汉典词典** | 中文 | 古汉语，字源解析，文言文支持 |
| **必应词典** | 通用 | 外部跳转，完整词典功能 |

#### 🎯 智能识别
- **中文单字** → 自动选择汉字词典
- **中文词组** → 自动选择词语词典  
- **英文词汇** → 自动选择剑桥词典

#### 🖱️ 便捷操作
- **双击查词**：选中文本双击即可查询
- **拖拽调整**：可拖动词典窗口位置和大小
- **Pin固定**：点击📌按钮固定窗口，避免误关闭
- **快捷关闭**：ESC键或点击外部区域关闭

---

## ⚙️ 设置说明

### 🎨 主题设置
1. 点击工具栏设置按钮 ⚙️
2. 选择 `主题` 选项卡
3. 在预设主题中选择喜欢的配色
4. 或选择"自定义"创建个人专属主题

### 📝 标注设置
1. 选择 `标注` 选项卡
2. 选择标注文档创建方式：
   - **笔记本模式**：每本书创建独立文档
   - **文档模式**：在指定文档下创建子文档
3. 设置目标笔记本或父文档

### 📖 阅读设置
1. 选择 `阅读` 选项卡
2. 设置翻页方式：
   - **点击翻页**：点击页面区域翻页（已移除）
   - **仅工具栏**：只能通过按钮翻页
3. 选择翻页动画效果
4. 设置单页或双页显示模式

### 🔧 通用设置
1. 选择 `通用` 选项卡
2. 设置书籍打开方式：
   - **新标签**：在新标签页打开
   - **右侧标签**：在右侧打开
   - **底部标签**：在底部打开
   - **新窗口**：在新窗口打开
3. 选择目录打开位置：
   - **窗口**：弹窗显示
   - **左侧**：左侧面板
   - **右侧**：右侧面板

### 🎨 EPUB块样式设置
支持多种EPUB块显示样式，让文档中的EPUB链接更加美观：

#### 5种块样式
| 样式 | 效果 | 适用场景 |
|------|------|----------|
| **默认** | 普通链接样式 | 简单引用 |
| **边框** | 添加边框装饰 | 突出显示 |
| **卡片** | 卡片式布局，显示封面和信息 | 图书展示 |
| **封面** | 仅显示封面图片 | 图书收藏 |
| **阅读器** | 嵌入式阅读器 | 直接阅读 |

#### 设置方法
1. **单个设置**：
   - 点击EPUB链接块左侧的块标图标
   - 在菜单中找到 `插件` → `EPUB样式`
   - 选择喜欢的样式

2. **批量设置**：
   - 点击文档右上角的菜单图标（···）
   - 在菜单中找到 `插件` → `批量转换EPUB样式`
   - 选择要应用的样式

3. **宽度调整**：
   - 点击块标图标 → `插件` → `宽度`
   - 卡片和封面样式支持宽度调整
   - 可通过滑块或输入数值调整
   - 支持25%-100%范围调整

#### 自动功能
- **自动提取元数据**：标题、作者、出版社、封面等
- **进度显示**：显示阅读进度百分比
- **时间记录**：显示最后阅读时间
- **封面缓存**：自动上传和缓存书籍封面

---

## 💡 使用技巧

### 📖 高效阅读技巧
1. **主题切换**：根据时间和环境选择合适主题
   - 白天使用"默认"或"杏仁黄"
   - 夜晚使用"夜间"或"暗黑"模式
2. **阅读模式**：根据内容类型选择
   - 小说类：分页模式 + 单页显示
   - 学术类：滚动模式 + 双页显示

### 📝 标注管理技巧
1. **颜色分类法**：
   - 🔴 红色：核心概念和重要理论
   - 🟡 黄色：一般重点和关键信息
   - 🟢 绿色：正面案例和成功经验
   - 🔵 蓝色：补充资料和扩展阅读
   - 🟣 紫色：疑问和需要进一步验证的内容

2. **标注整理**：定期在标注模式下回顾所有标注内容
3. **标注导出**：标注会自动保存到思源笔记文档，便于后续整理

### 🔖 书签管理技巧
1. **重要章节**：为关键章节添加书签，便于快速返回
2. **阅读断点**：暂停阅读时添加书签，下次快速继续
3. **参考标记**：为需要反复查阅的章节添加书签
4. **批量清理**：定期在书签模式下清理不需要的书签

### 📚 词典查询技巧
1. **快速查词**：遇到生词直接双击选中查询
2. **固定窗口**：学习时点击📌固定词典窗口
3. **多词典对比**：切换不同词典标签对比释义

### 🎨 EPUB块样式技巧
1. **图书收藏**：使用"卡片"样式制作个人图书库
2. **阅读笔记**：使用"边框"样式突出重点书籍
3. **快速预览**：使用"阅读器"样式在文档中直接阅读
4. **封面展示**：使用"封面"样式制作书籍展示墙
5. **宽度调整**：根据屏幕大小调整卡片宽度获得最佳效果

---

## ❓ 常见问题

### 📱 使用问题

**Q：EPUB文件打不开？**  
A：检查文件格式是否为标准EPUB，确保文件未损坏

**Q：标注没有保存？**  
A：检查标注设置中是否正确配置了笔记本或父文档

**Q：词典查询没反应？**  
A：检查网络连接，部分词典需要联网查询

**Q：主题切换无效？**  
A：刷新阅读器页面，或重新打开EPUB文件

### ⚙️ 设置问题

**Q：找不到设置按钮？**  
A：设置按钮在工具栏右侧，图标为 ⚙️

**Q：标注文档在哪里？**  
A：根据设置的模式，在对应笔记本或文档下查找

**Q：如何修改快捷键？**  
A：目前快捷键固定，后续版本将支持自定义

**Q：EPUB块样式无效？**  
A：确保EPUB文件已正确拖拽到文档中，点击块标图标通过菜单选择对应样式

**Q：卡片样式不显示封面？**  
A：需要等待插件自动提取封面，提取较慢时可能需要几秒钟

**Q：嵌入式阅读器无法操作？**  
A：点击阅读器内部激活焦点，然后可使用方向键翻页

**Q：自定义主题不生效？**  
A：确保在主题设置中选择了"自定义"，并检查颜色值格式是否正确

---

## 🔧 技术架构

### 技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| **Vue 3** | Composition API | 响应式前端框架 |
| **ePub.js** | v0.3+ | EPUB渲染引擎 |
| **思源笔记** | Plugin API | 块级集成、数据持久化 |
| **TypeScript** | 5.0+ | 类型安全，代码提示 |

### 设计理念

- **🎯 职责清晰**：单一职责，模块化设计
- **🔗 松耦合**：组合函数，依赖注入  
- **📱 用户友好**：现代UI，智能交互
- **⚡ 性能优先**：算法优化，内存管理
- **🛠️ 可扩展性**：插件架构，配置化

### 性能优化

- **🚀 简洁高效**：单行函数，链式操作
- **💾 智能缓存**：标注缓存，进度防抖
- **🔄 响应式更新**：直接数组操作，避免重载
- **🧹 内存管理**：自动清理，防内存泄漏

---

## 🙏 致谢

感谢思源笔记团队提供的优秀插件开发框架和模板，让插件开发变得更加便捷高效。

特别感谢：
- **[思源笔记插件开发指南](https://ld246.com/article/1723732790981#START-UP)** 及其作者提供的详细开发文档
- **归叶插件开发者 [vv](https://github.com/Wetoria)** 提供的 [Vue3 + Vite 思源插件模板](https://github.com/siyuan-note/plugin-sample-vite-vue)
- **[Epub.js](https://github.com/futurepress/epub.js)** 开源项目提供强大的 EPUB 渲染引擎

同时感谢所有使用和反馈的用户，您们的建议让思阅不断完善。

**开发理念**：极简、高效、优雅、完美  
**技术选型**：Vue3 + Epub.js + 思源笔记API  
**架构特点**：模块化、组合式、响应式、可扩展
